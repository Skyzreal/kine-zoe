import{a as O}from"./chunk-SWYXNIBO.js";import{b as P,d as I}from"./chunk-VUV2BK2G.js";import{Da as E,Ha as x,Kb as S,Lb as y,Nb as h,S as d,Ua as m,Va as i,Wa as e,X as p,Y as f,Ya as v,Za as _,_a as c,c as g,eb as n,fb as b,gb as l,nb as C,ob as M,ta as r}from"./chunk-72BHGUR2.js";function w(o,s){o&1&&(i(0,"div",4)(1,"h2"),n(2,"V\xE9rification du paiement..."),e(),i(3,"p"),n(4,"Veuillez patienter pendant que nous confirmons votre r\xE9servation."),e()())}function V(o,s){if(o&1){let t=v();i(0,"div",5)(1,"h2"),n(2,"Erreur"),e(),i(3,"p"),n(4),e(),i(5,"button",6),_("click",function(){p(t);let u=c();return f(u.goHome())}),n(6,"Retour \xE0 l'accueil"),e()()}if(o&2){let t=c();r(4),b(t.errorMessage)}}function z(o,s){if(o&1&&(i(0,"div",13)(1,"h3"),n(2,"D\xE9tails de votre rendez-vous"),e(),i(3,"div",14)(4,"strong"),n(5,"Client:"),e(),n(6),e(),i(7,"div",14)(8,"strong"),n(9,"Service:"),e(),n(10),e(),i(11,"div",14)(12,"strong"),n(13,"Date et heure:"),e(),n(14),C(15,"date"),e(),i(16,"div",14)(17,"strong"),n(18,"Email:"),e(),n(19),e(),i(20,"div",14)(21,"strong"),n(22,"T\xE9l\xE9phone:"),e(),n(23),e()()),o&2){let t=c(2);r(6),l(" ",t.clientInfo.name," "),r(4),l(" ",t.clientInfo.service," "),r(4),l(" ",M(15,5,t.clientInfo.timeSlot,"EEEE, d MMMM yyyy \xE0 HH:mm","fr-CA")," "),r(5),l(" ",t.clientInfo.email," "),r(4),l(" ",t.clientInfo.phone," ")}}function T(o,s){if(o&1){let t=v();i(0,"div",7)(1,"div",8),n(2,"\u2713"),e(),i(3,"h1"),n(4,"Paiement r\xE9ussi!"),e(),i(5,"p",9),n(6,"Votre r\xE9servation a \xE9t\xE9 confirm\xE9e avec succ\xE8s."),e(),x(7,z,24,9,"div",10),i(8,"div",11)(9,"h3"),n(10,"Prochaines \xE9tapes"),e(),i(11,"ul")(12,"li"),n(13,"Vous recevrez un courriel de confirmation sous peu"),e(),i(14,"li"),n(15,"Un \xE9v\xE9nement a \xE9t\xE9 ajout\xE9 \xE0 notre calendrier"),e(),i(16,"li"),n(17,"Nous vous contacterons si nous avons besoin d'informations suppl\xE9mentaires"),e()()(),i(18,"div",12)(19,"button",6),_("click",function(){p(t);let u=c();return f(u.goHome())}),n(20,"Retour \xE0 l'accueil"),e()()()}if(o&2){let t=c();r(7),m("ngIf",t.clientInfo)}}var k=class o{route=d(P);router=d(I);stripeService=d(O);isLoading=!0;paymentSuccess=!1;errorMessage="";clientInfo=null;ngOnInit(){return g(this,null,function*(){let s=this.route.snapshot.queryParamMap.get("session_id");if(!s){this.errorMessage="No session ID provided",this.isLoading=!1;return}try{let t=yield this.stripeService.verifyPayment(s);t.success&&t.clientInfo?(this.paymentSuccess=!0,this.clientInfo=t.clientInfo,yield this.finalizeBooking()):this.errorMessage="Payment was not successful"}catch(t){console.error("Error verifying payment:",t),this.errorMessage=t.message||"Failed to verify payment"}finally{this.isLoading=!1}})}finalizeBooking(){return g(this,null,function*(){console.log("Booking finalized for:",this.clientInfo.name)})}goHome(){this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-success"]],decls:4,vars:3,consts:[[1,"success-container"],["class","loading",4,"ngIf"],["class","error",4,"ngIf"],["class","success",4,"ngIf"],[1,"loading"],[1,"error"],[1,"btn-primary",3,"click"],[1,"success"],[1,"success-icon"],[1,"success-message"],["class","booking-details",4,"ngIf"],[1,"next-steps"],[1,"action-buttons"],[1,"booking-details"],[1,"detail-item"]],template:function(t,a){t&1&&(i(0,"div",0),x(1,w,5,0,"div",1)(2,V,7,1,"div",2)(3,T,21,1,"div",3),e()),t&2&&(r(),m("ngIf",a.isLoading),r(),m("ngIf",!a.isLoading&&!a.paymentSuccess),r(),m("ngIf",!a.isLoading&&a.paymentSuccess))},dependencies:[h,S,y],styles:[".success-container[_ngcontent-%COMP%]{max-width:600px;margin:2rem auto;padding:2rem;text-align:center}.loading[_ngcontent-%COMP%], .error[_ngcontent-%COMP%]{padding:2rem;border-radius:8px;margin:1rem 0}.loading[_ngcontent-%COMP%]{background-color:#f0f9ff;border:1px solid #0ea5e9}.error[_ngcontent-%COMP%]{background-color:#fef2f2;border:1px solid #ef4444;color:#dc2626}.success[_ngcontent-%COMP%]{background-color:#f0fdf4;border:1px solid #22c55e;border-radius:8px;padding:2rem}.success-icon[_ngcontent-%COMP%]{font-size:4rem;color:#22c55e;margin-bottom:1rem}.success[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#166534;margin-bottom:1rem}.success-message[_ngcontent-%COMP%]{font-size:1.1rem;color:#15803d;margin-bottom:2rem}.booking-details[_ngcontent-%COMP%]{background-color:#fff;border-radius:6px;padding:1.5rem;margin:1.5rem 0;text-align:left;box-shadow:0 1px 3px #0000001a}.booking-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#374151;margin-bottom:1rem;text-align:center}.detail-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.5rem 0;border-bottom:1px solid #f3f4f6}.detail-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#374151}.next-steps[_ngcontent-%COMP%]{background-color:#fff;border-radius:6px;padding:1.5rem;margin:1.5rem 0;text-align:left;box-shadow:0 1px 3px #0000001a}.next-steps[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#374151;margin-bottom:1rem}.next-steps[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{color:#6b7280;margin:0;padding-left:1.5rem}.next-steps[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.5rem}.btn-primary[_ngcontent-%COMP%]{background-color:var(--color-primary, #8B8672);color:var(--color-white, white);border:none;padding:.75rem 1.5rem;border-radius:6px;cursor:pointer;font-size:1rem;margin:1rem .5rem;transition:all .2s}.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--color-primary-dark, #6B6652);transform:scale(1.05)}.action-buttons[_ngcontent-%COMP%]{margin-top:2rem}"]})};export{k as Success};
