import{a as Z}from"./chunk-CC2ZJ65I.js";import{a as R,b as A,c as j,d as G,e as H,f as Q,h as J,i as K,j as U,k as X,l as Y}from"./chunk-KZJL3U6J.js";import{a as $}from"./chunk-SWYXNIBO.js";import{d as z}from"./chunk-VUV2BK2G.js";import{Da as O,Ha as p,Jb as N,Kb as B,Mb as W,Nb as D,S as E,Ua as m,Va as i,Vb as q,Wa as t,X as v,Xa as T,Y as x,Ya as k,Za as F,_a as c,c as M,cb as g,db as h,eb as o,fb as V,gb as _,hb as L,ib as C,jb as y,kb as S,nb as P,pb as w,ta as a}from"./chunk-72BHGUR2.js";function te(e,r){e&1&&(i(0,"span"),o(1,"Le pr\xE9nom est obligatoire"),t())}function ne(e,r){e&1&&(i(0,"span"),o(1,"Le pr\xE9nom doit contenir au moins 2 caract\xE8res"),t())}function ie(e,r){if(e&1&&(i(0,"div",30),p(1,te,2,0,"span",29)(2,ne,2,0,"span",29),t()),e&2){c();let n=g(14);a(),m("ngIf",n.errors==null?null:n.errors.required),a(),m("ngIf",n.errors==null?null:n.errors.minlength)}}function oe(e,r){e&1&&(i(0,"span"),o(1,"Le nom est obligatoire"),t())}function re(e,r){e&1&&(i(0,"span"),o(1,"Le nom doit contenir au moins 2 caract\xE8res"),t())}function ae(e,r){if(e&1&&(i(0,"div",30),p(1,oe,2,0,"span",29)(2,re,2,0,"span",29),t()),e&2){c();let n=g(19);a(),m("ngIf",n.errors==null?null:n.errors.required),a(),m("ngIf",n.errors==null?null:n.errors.minlength)}}function le(e,r){e&1&&(i(0,"span"),o(1,"L'adresse est obligatoire"),t())}function de(e,r){e&1&&(i(0,"span"),o(1,"L'adresse doit contenir au moins 5 caract\xE8res"),t())}function me(e,r){if(e&1&&(i(0,"div",30),p(1,le,2,0,"span",29)(2,de,2,0,"span",29),t()),e&2){c();let n=g(24);a(),m("ngIf",n.errors==null?null:n.errors.required),a(),m("ngIf",n.errors==null?null:n.errors.minlength)}}function se(e,r){e&1&&(i(0,"span"),o(1,"La date de naissance est obligatoire"),t())}function ce(e,r){if(e&1&&(i(0,"div",30),p(1,se,2,0,"span",29),t()),e&2){c();let n=g(29);a(),m("ngIf",n.errors==null?null:n.errors.required)}}function pe(e,r){e&1&&(i(0,"span"),o(1,"Le num\xE9ro de t\xE9l\xE9phone est obligatoire"),t())}function fe(e,r){e&1&&(i(0,"span"),o(1,"Format de t\xE9l\xE9phone invalide"),t())}function ge(e,r){e&1&&(i(0,"span"),o(1,"Le num\xE9ro doit contenir au moins 10 chiffres"),t())}function _e(e,r){if(e&1&&(i(0,"div",30),p(1,pe,2,0,"span",29)(2,fe,2,0,"span",29)(3,ge,2,0,"span",29),t()),e&2){c();let n=g(34);a(),m("ngIf",n.errors==null?null:n.errors.required),a(),m("ngIf",n.errors==null?null:n.errors.pattern),a(),m("ngIf",n.errors==null?null:n.errors.minlength)}}function ue(e,r){e&1&&(i(0,"span"),o(1,"L'e-mail est obligatoire"),t())}function ve(e,r){e&1&&(i(0,"span"),o(1,"L'e-mail doit \xEAtre valide"),t())}function xe(e,r){if(e&1&&(i(0,"div",30),p(1,ue,2,0,"span",29)(2,ve,2,0,"span",29),t()),e&2){c();let n=g(39);a(),m("ngIf",n.errors==null?null:n.errors.required),a(),m("ngIf",n.errors==null?null:n.errors.email)}}function he(e,r){if(e&1&&(i(0,"div",31)(1,"span",32),o(2),t(),i(3,"span",33),o(4),t()()),e&2){let n=r.$implicit,s=r.index,l=c(2);a(2),_("",s+1,"."),a(2),V(l.getFormattedTimeSlot(n))}}function Ce(e,r){if(e&1&&(i(0,"div",34),o(1),t()),e&2){let n=c(2);a(),_(" ",n.paymentError," ")}}function ye(e,r){e&1&&(i(0,"span"),o(1,"Proc\xE9der au paiement"),t())}function Se(e,r){e&1&&(i(0,"span"),o(1,"Traitement en cours..."),t())}function Ie(e,r){if(e&1){let n=k();i(0,"div",9),T(1,"div",10)(2,"div",11),i(3,"h1"),o(4,"Information"),t(),i(5,"p",12),o(6,"Entrez vos informations"),t(),i(7,"form",13,0),F("ngSubmit",function(){v(n);let l=c();return x(l.submitForm())}),i(9,"p",14),o(10,"Tous les champs sont obligatoires"),t(),i(11,"label"),o(12,"Pr\xE9nom *"),t(),i(13,"input",15,1),S("ngModelChange",function(l){v(n);let d=c();return y(d.clientInfo.prenom,l)||(d.clientInfo.prenom=l),x(l)}),t(),p(15,ie,3,2,"div",16),i(16,"label"),o(17,"Nom *"),t(),i(18,"input",17,2),S("ngModelChange",function(l){v(n);let d=c();return y(d.clientInfo.nom,l)||(d.clientInfo.nom=l),x(l)}),t(),p(20,ae,3,2,"div",16),i(21,"label"),o(22,"Adresse *"),t(),i(23,"input",18,3),S("ngModelChange",function(l){v(n);let d=c();return y(d.clientInfo.adresse,l)||(d.clientInfo.adresse=l),x(l)}),t(),p(25,me,3,2,"div",16),i(26,"label"),o(27,"Date de naissance *"),t(),i(28,"input",19,4),S("ngModelChange",function(l){v(n);let d=c();return y(d.clientInfo.dateNaissance,l)||(d.clientInfo.dateNaissance=l),x(l)}),t(),p(30,ce,2,1,"div",16),i(31,"label"),o(32,"Num\xE9ro de t\xE9l\xE9phone *"),t(),i(33,"input",20,5),S("ngModelChange",function(l){v(n);let d=c();return y(d.clientInfo.phone,l)||(d.clientInfo.phone=l),x(l)}),t(),p(35,_e,4,3,"div",16),i(36,"label"),o(37,"E-mail *"),t(),i(38,"input",21,6),S("ngModelChange",function(l){v(n);let d=c();return y(d.clientInfo.email,l)||(d.clientInfo.email=l),x(l)}),t(),p(40,xe,3,2,"div",16),i(41,"div",22)(42,"h3"),o(43,"R\xE9sum\xE9 de votre r\xE9servation"),t(),i(44,"p")(45,"strong"),o(46,"Service:"),t(),o(47),t(),i(48,"p")(49,"strong"),o(50,"Nombre de cr\xE9neaux:"),t(),o(51),t(),i(52,"div",23),p(53,he,5,2,"div",24),t(),i(54,"div",25)(55,"p")(56,"strong"),o(57,"Prix par cr\xE9neau:"),t(),o(58),P(59,"currency"),t(),i(60,"p",26)(61,"strong"),o(62,"Prix total:"),t(),o(63),P(64,"currency"),t()()(),p(65,Ce,2,1,"div",27),i(66,"button",28),p(67,ye,2,0,"span",29)(68,Se,2,0,"span",29),t()()()}if(e&2){let n=g(8),s=g(14),l=g(19),d=g(24),u=g(29),I=g(34),b=g(39),f=c();a(13),h("invalid",s.invalid&&(s.dirty||s.touched)),C("ngModel",f.clientInfo.prenom),a(2),m("ngIf",s.invalid&&(s.dirty||s.touched)),a(3),h("invalid",l.invalid&&(l.dirty||l.touched)),C("ngModel",f.clientInfo.nom),a(2),m("ngIf",l.invalid&&(l.dirty||l.touched)),a(3),h("invalid",d.invalid&&(d.dirty||d.touched)),C("ngModel",f.clientInfo.adresse),a(2),m("ngIf",d.invalid&&(d.dirty||d.touched)),a(3),h("invalid",u.invalid&&(u.dirty||u.touched)),C("ngModel",f.clientInfo.dateNaissance),a(2),m("ngIf",u.invalid&&(u.dirty||u.touched)),a(3),h("invalid",I.invalid&&(I.dirty||I.touched)),C("ngModel",f.clientInfo.phone),a(2),m("ngIf",I.invalid&&(I.dirty||I.touched)),a(3),h("invalid",b.invalid&&(b.dirty||b.touched)),C("ngModel",f.clientInfo.email),a(2),m("ngIf",b.invalid&&(b.dirty||b.touched)),a(7),_(" ",f.clientInfo.service),a(4),_(" ",f.selectedSlots.length),a(2),m("ngForOf",f.selectedSlots),a(5),_(" ",w(59,33,f.getSinglePrice()/100,"CAD","symbol","1.2-2")),a(5),_(" ",w(64,38,f.getTotalPrice()/100,"CAD","symbol","1.2-2")),a(2),m("ngIf",f.paymentError),a(),m("disabled",!n.valid||f.isProcessingPayment),a(),m("ngIf",!f.isProcessingPayment),a(),m("ngIf",f.isProcessingPayment)}}function be(e,r){if(e&1&&(i(0,"div",35)(1,"h2"),o(2,"Merci pour votre r\xE9servation !"),t(),i(3,"p"),o(4,"Votre paiement a \xE9t\xE9 trait\xE9 avec succ\xE8s."),t(),i(5,"p"),o(6,"Vous recevrez un courriel de confirmation sous peu."),t(),i(7,"div",36)(8,"h3"),o(9,"D\xE9tails de votre rendez-vous"),t(),i(10,"p")(11,"strong"),o(12,"Service:"),t(),o(13),t(),i(14,"p")(15,"strong"),o(16,"Date et heure:"),t(),o(17),t(),i(18,"p")(19,"strong"),o(20,"Client:"),t(),o(21),t()()()),e&2){let n=c();a(13),_(" ",n.clientInfo.service),a(4),_(" ",n.clientInfo.timeSlot),a(4),L(" ",n.clientInfo.prenom," ",n.clientInfo.nom)}}var ee=class e{stripeService=E($);router=E(z);bookingService=E(Z);formSubmitted=!1;isProcessingPayment=!1;paymentError="";selectedSlots=[];clientInfo={prenom:"",nom:"",phone:"",email:"",adresse:"",dateNaissance:"",service:"Physiotherapy Session",timeSlot:"",timeSlotEnd:"",amount:1500};ngOnInit(){return M(this,null,function*(){if(this.bookingService.hasSelectedSlots()){this.selectedSlots=this.bookingService.getSelectedSlots(),this.clientInfo.service=this.bookingService.getSelectedService(),this.clientInfo.timeSlot=this.selectedSlots[0]?.date||"",this.clientInfo.timeSlotEnd=this.selectedSlots[0]?.end||"";let r=this.bookingService.getSelectedDuration();r&&(this.clientInfo.amount=r.price*this.selectedSlots.length)}else this.router.navigate(["/reserver"])})}getSinglePrice(){let r=this.bookingService.getSelectedDuration();return r?r.price:0}getTotalPrice(){return this.clientInfo.amount??0}getFormattedTimeSlot(r){let n=new Date(r.date),s=new Date(r.end),l=n.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),d=n.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),u=s.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"});return`${l} - ${d} \xE0 ${u}`}submitForm(){return M(this,null,function*(){this.isProcessingPayment=!0,this.paymentError="";try{let r=yield this.stripeService.createPaymentSession(this.clientInfo);yield this.stripeService.redirectToCheckout(r.sessionId)}catch(r){console.error("Payment error:",r),this.paymentError=r.message||"Failed to process payment",this.isProcessingPayment=!1}})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=O({type:e,selectors:[["app-confirmation-info"]],decls:2,vars:2,consts:[["userForm","ngForm"],["prenom","ngModel"],["nom","ngModel"],["adresse","ngModel"],["dateNaissance","ngModel"],["phone","ngModel"],["emailField","ngModel"],["class","confirmation-container",4,"ngIf"],["class","thank-you",4,"ngIf"],[1,"confirmation-container"],[1,"bg-shape","shape1"],[1,"bg-shape","shape2"],[1,"subtitle"],[1,"info-form",3,"ngSubmit"],[1,"form-note"],["name","prenom","required","","minlength","2","placeholder","Votre pr\xE9nom",3,"ngModelChange","ngModel"],["class","error-text",4,"ngIf"],["name","nom","required","","minlength","2","placeholder","Votre nom",3,"ngModelChange","ngModel"],["name","adresse","required","","minlength","5","placeholder","123 Rue Exemple, Montr\xE9al, QC",3,"ngModelChange","ngModel"],["name","dateNaissance","type","date","required","",3,"ngModelChange","ngModel"],["name","phone","type","tel","required","","pattern","[\\(\\)\\d\\s\\-\\+]+","minlength","10","placeholder","(514) 123-4567",3,"ngModelChange","ngModel"],["name","email","type","email","required","","email","","placeholder","votre@email.com",3,"ngModelChange","ngModel"],[1,"booking-summary"],[1,"slots-list"],["class","slot-item",4,"ngFor","ngForOf"],[1,"pricing-details"],[1,"total-price"],["class","error-message",4,"ngIf"],["type","submit",1,"submit-btn",3,"disabled"],[4,"ngIf"],[1,"error-text"],[1,"slot-item"],[1,"slot-number"],[1,"slot-details"],[1,"error-message"],[1,"thank-you"],[1,"confirmation-details"]],template:function(n,s){n&1&&p(0,Ie,69,43,"div",7)(1,be,22,4,"div",8),n&2&&(m("ngIf",!s.formSubmitted),a(),m("ngIf",s.formSubmitted))},dependencies:[Y,Q,R,A,j,J,U,X,K,H,G,D,N,B,W,q],styles:['.confirmation-container[_ngcontent-%COMP%]{padding:120px 5% 4rem;font-family:var(--font-primary, "Cormorant", serif);text-align:center;background:var(--color-background, #F5EFE7);position:relative}.subtitle[_ngcontent-%COMP%]{color:var(--color-text-medium, #6B6652);margin-bottom:2rem}.form-note[_ngcontent-%COMP%]{font-weight:500;margin-bottom:1.5rem}.info-form[_ngcontent-%COMP%]{background:var(--color-white, white);padding:2rem;border-radius:12px;max-width:500px;margin:0 auto;box-shadow:0 3px 12px #8b86721a;display:flex;flex-direction:column;gap:1rem}.info-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{text-align:left;font-weight:500;margin-top:.5rem}.info-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.75rem;border:1px solid #ccc;border-radius:6px;font-size:1rem;transition:border-color .3s}.info-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4a90e2}.info-form[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%]{border-color:#dc3545}.error-text[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;text-align:left;margin-top:-.5rem}.info-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:var(--color-primary, #8B8672);padding:.8rem;border:1px solid var(--color-primary, #8B8672);font-weight:700;border-radius:6px;cursor:pointer;color:var(--color-white, white);transition:all .3s ease}.info-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:var(--color-primary-dark, #6B6652);border-color:var(--color-primary-dark, #6B6652);transform:scale(1.05)}.thank-you[_ngcontent-%COMP%]{padding:140px 5% 4rem;text-align:center;font-family:var(--font-primary, "Cormorant", serif)}.bg-shape[_ngcontent-%COMP%]{position:absolute;z-index:0;opacity:.2;border-radius:50%}.shape1[_ngcontent-%COMP%]{width:400px;height:400px;background:var(--color-shape-1, #E8E2D8);top:-100px;left:-100px}.shape2[_ngcontent-%COMP%]{width:300px;height:300px;background:var(--color-shape-2, #D4CEC4);bottom:-80px;right:-60px}.booking-summary[_ngcontent-%COMP%]{margin-top:1.5rem;padding:1.5rem;background:var(--color-background, #F5EFE7);border-radius:8px;border:1px solid rgba(139,134,114,.2);text-align:left}.booking-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem;color:var(--color-primary, #8B8672);text-align:center}.booking-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;color:#333}.slots-list[_ngcontent-%COMP%]{margin:1rem 0;padding:1rem;background:#fff;border-radius:6px;max-height:200px;overflow-y:auto}.slot-item[_ngcontent-%COMP%]{display:flex;gap:.5rem;padding:.5rem 0;border-bottom:1px solid rgba(0,0,0,.1);font-size:.9rem}.slot-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.slot-number[_ngcontent-%COMP%]{font-weight:600;color:var(--color-primary, #8B8672);min-width:20px}.slot-details[_ngcontent-%COMP%]{color:#555;flex:1}.pricing-details[_ngcontent-%COMP%]{margin-top:1rem;padding-top:1rem;border-top:2px solid rgba(139,134,114,.3)}.pricing-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0}.pricing-details[_ngcontent-%COMP%]   .total-price[_ngcontent-%COMP%]{font-size:1.15rem;color:var(--color-primary, #8B8672);margin-top:.8rem;padding-top:.5rem}.error-message[_ngcontent-%COMP%]{background:#ffebee;color:#d32f2f;padding:1rem;border-radius:6px;margin-top:1rem;border:1px solid #ffcdd2}.submit-btn[_ngcontent-%COMP%]{margin-top:1rem!important}.submit-btn[_ngcontent-%COMP%]:disabled{background:#ccc;border-color:#ccc;cursor:not-allowed;transform:none!important}.confirmation-details[_ngcontent-%COMP%]{max-width:600px;margin:2rem auto;padding:2rem;background:#fff;border-radius:12px;box-shadow:0 3px 12px #8b86721a}.confirmation-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--color-primary, #8B8672);margin-bottom:1rem}.confirmation-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;color:#333}']})};export{ee as ConfirmationInfo};
